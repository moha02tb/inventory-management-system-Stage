-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Jan 30, 2026 at 06:02 PM
-- Server version: 10.4.32-MariaDB
-- PHP Version: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `inventory_db`
--

-- --------------------------------------------------------

--
-- Table structure for table `alertestock`
--

CREATE TABLE `alertestock` (
  `id` int(11) NOT NULL,
  `produitId` int(11) DEFAULT NULL,
  `type` varchar(50) NOT NULL,
  `date` timestamp NOT NULL DEFAULT current_timestamp(),
  `statut` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `alertestock`
--

INSERT INTO `alertestock` (`id`, `produitId`, `type`, `date`, `statut`) VALUES
(1, 15, 'LOW_STOCK', '2025-12-02 11:48:01', 'CLOSED'),
(2, 16, 'LOW_STOCK', '2025-12-02 15:15:14', 'CLOSED'),
(3, 16, 'LOW_STOCK', '2025-12-07 22:30:35', 'OPEN');

-- --------------------------------------------------------

--
-- Table structure for table `categorie`
--

CREATE TABLE `categorie` (
  `id` int(11) NOT NULL,
  `nom` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `categorie`
--

INSERT INTO `categorie` (`id`, `nom`) VALUES
(1, 'phone'),
(2, 'routers'),
(3, 'accessorie'),
(4, 'sim/Esim');

-- --------------------------------------------------------

--
-- Table structure for table `facture`
--

CREATE TABLE `facture` (
  `id` int(11) NOT NULL,
  `saleId` int(11) NOT NULL,
  `filename` varchar(255) NOT NULL,
  `mime` varchar(64) NOT NULL DEFAULT 'application/pdf',
  `size` int(11) NOT NULL,
  `data` longblob NOT NULL,
  `createdAt` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `facture`
--

INSERT INTO `facture` (`id`, `saleId`, `filename`, `mime`, `size`, `data`, `createdAt`) VALUES
(1, 10, 'invoice-10-1764969625682.pdf', 'application/pdf', 1476, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333370a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd6edc3010847b3ec5be80e9fd9d1581838a0076912e883ac38571922a5fe1caaf6ff07230945391a82001fecdb79c1d2126a60721a66c4ae74bf928429fc599222a822ea5a1aaf86df95e7e975fd73bf7ef7e4cb74d21674a6b9513345dcae3b3900c34ade5e5e40dcb48ca744a8ca44127ac6830c448fc4ad3cff234fd9f3e4b4d0cdffafa2f7d656feef63652309d94931158e0685890ca3aa44170ee374d8cb51dac0843d6a1e1bea2f856fd9bdf194709e995d5777f76483a62a3add647e86c62aab3b1f95116b84ae88e15989371c63a927597db1fb7115bbe0b1c73775639220d917a946f5a9d77fd0d4ec50acf80e5c64d3f6345a2751f6018947d8eeb0c49ebbbc72b90a186edfb2919102ce99d966de3fae1c4b05760d7cfe8b96ce9cafdb7233d488ff135c41b182c74b1381ca2685cfbc13dd447926b27d7f49ed80d8a7531be037d011facdcfc0a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230353231323032355a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393538203030303030206e200a30303030303031303135203030303030206e200a30303030303030383936203030303030206e200a30303030303030383735203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373738203030303030206e200a30303030303030373033203030303030206e200a30303030303030363137203030303030206e200a30303030303030363432203030303030206e200a30303030303030363637203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c65323038353035643462346361323663326535653166643435393934643039613e203c65323038353035643462346361323663326535653166643435393934643039613e5d0a3e3e0a7374617274787265660a313036320a2525454f460a, '2025-12-05 21:20:25'),
(2, 11, 'invoice-11-1765036836008.pdf', 'application/pdf', 1477, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333380a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd6edc3010847b3ec5be80e9fd9d1581838a0049912e883ac385712755be22555e3fa0ce309453105b050b72c9f9766728c4c4f420c4944de97c2dbf8ad0efe24c111541d7d25055fc6dfb5a7e961feb9dfb775fa6b74321674a6b9513345dcbe3372119685acad3c91be69194e9941849834e58d0608891f899a6efe5ebf4397d969a18def5f5237d656feef63252309d94931198e1689891ca3aa44170ee374d4cb41dec0843d6a1e1bea37857fd9bdf194709e995d577333b241db1d156eb2bf46262aa17633bea2fc0554277acc02519672c235977b9dddc466cf93ef73cd71452f97f6f8e76655a9d77a907a7628167c072e3f1eafd252de396b1e79a85e490ad574d4d8f7620430ddba72c1910cce968e9d93659e02881bd02bb94a3cfd0d295fbb4233d48ffdcebd7dec0d29a359d8d8d0f62a371ed857bac8f246b5a4b7a776f03e37f80fe00da77e1ba0a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363136303033355a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393539203030303030206e200a30303030303031303136203030303030206e200a30303030303030383937203030303030206e200a30303030303030383736203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373739203030303030206e200a30303030303030373034203030303030206e200a30303030303030363138203030303030206e200a30303030303030363433203030303030206e200a30303030303030363638203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c31346466666530306230643534623332616538363363613834346562366537363e203c31346466666530306230643534623332616538363363613834346562366537363e5d0a3e3e0a7374617274787265660a313036330a2525454f460a, '2025-12-06 16:00:36'),
(3, 12, 'invoice-12-1765051547840.pdf', 'application/pdf', 1469, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333300a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592b14ec4400c44fbfd0aff008bedb5c759e99402090a3a443a4481ee928a2ba8f87db4e174ca5d1010458994c43bcff68c1013d38d105354a5fd317d24a1cf644cee194ec7549155ecf4fa9e9ed3d35c737dee6e387d1432a6283573808663ba7d10928e8629bdecac62ec499976819ed46987091505de13bfd2f098ee87ffe9b3e44077d6d7bff495ad9a95b79e9c69a71c0cc70843c58850d62e0a04fb5659a4a8d68d1da18bdc555c77e467d54b7e636c258465565bcd6c9030f8425b4bbb5d0ff32487c265eb7e01cee2ba62390ec1d863eaa9b42dd7ef6dc3977c1b9b9fb30ba1fcdb99ad5d15cdc62bd79d4331c1c25162b163d4607498309e5c95e67babddca952e7b597b2be1108c61a86151170e6c9e8c2d032b6fbd65b48629b7197bba9116e939d01751e276e9d89e1bc15e39b71fd760eb496697a6b096e005ee27d017bf2bdff60a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230303534375a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393531203030303030206e200a30303030303031303038203030303030206e200a30303030303030383839203030303030206e200a30303030303030383638203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373731203030303030206e200a30303030303030363936203030303030206e200a30303030303030363130203030303030206e200a30303030303030363335203030303030206e200a30303030303030363630203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c31616333363262313165653238643765316536383237386539336135323638663e203c31616333363262313165653238643765316536383237386539336135323638663e5d0a3e3e0a7374617274787265660a313035350a2525454f460a, '2025-12-06 20:05:47'),
(4, 13, 'invoice-13-1765054235909.pdf', 'application/pdf', 1484, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203334350a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd8ed4401084f3798a7e811bfab7da23ad1c201d0119c21922406b3bba0d88787d34be1ff9d6087060591ecff4575355424c4c0f424cd994aeb7f2b308fd2ace145111742b0d55c55f3e9fcad7f265db737feee3f4b228e44c69ad7282a65bf9f04948069ad6f2ede20dcb48ca74498ca44117ac6830c448fc9da6cfe571fabff92c3531bccdd77fcd57f6e66e3f460aa68b7232020b1c0d0b5259873408ae7da78999b6938a30641d1aee15c5dbd4f7fcce384b48afac7eb8b343d211bbd96afd099d4d4c7536b6b3fe025c25f4c00accc9b8621dc9bacbedd96dc49eef4bcf734b2195ff76e6ac2ad3ea7c483d38152b3c03963b8f9fdfe123c9264647920e96bb8a04aeca88306f3e2bebbcc5139eae6705ca50c38e25900c089674b4f46cfba8ce12d82b702841f432b774e56ec6480fd22fb635ff5de7421763e393d0685cfb8f7be8abb358d37bcd7728fe03e837c5b5e6f50a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353033355a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393636203030303030206e200a30303030303031303233203030303030206e200a30303030303030393034203030303030206e200a30303030303030383833203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373836203030303030206e200a30303030303030373131203030303030206e200a30303030303030363235203030303030206e200a30303030303030363530203030303030206e200a30303030303030363735203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c30643431366164393461653765646263663662353735653034386435643835613e203c30643431366164393461653765646263663662353735653034386435643835613e5d0a3e3e0a7374617274787265660a313037300a2525454f460a, '2025-12-06 20:50:35'),
(5, 14, 'invoice-14-1765054366002.pdf', 'application/pdf', 1477, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333380a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd6edc3010847b3ec5be80e9fd9d1581838a004e912eb03ac385712755bec2955f3fa06c18ca0948ac8204f837df7266859898ee8498b2299dafe5ad08bd17678aa808ba9686aae29fcbd7f2587eaf776edffd983e37859c29ad554ed0742df73f8564a069294f276f984752a65362240d3a6141832146e2679a7e9587e97bfa2c35317ce9ebfff495bdb9dbcb48c174524e466086a361462aeb9006c1b9df3431d776b0220c598786db8ae24bf56f7e671c25a45756dffdd921e9888db65a1fa1171353bd18db517f01ae12ba63052ec9386319c9bacbedc36dc496ef73cf734d2195fff5e66855a6d579977a702a1678062c371efb190b12adbb03c3a0ec975867485adf4d3d5a810c356c9fb2644030a7775ab64d16875366afc02ee5e8dddad295fb6f47ba93dedc6b6b6f60b0d0d9c2f820341ad77e700bf59164cd6a49ef7dbc41b1cec637a03f7dd6e1910a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353234355a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393539203030303030206e200a30303030303031303136203030303030206e200a30303030303030383937203030303030206e200a30303030303030383736203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373739203030303030206e200a30303030303030373034203030303030206e200a30303030303030363138203030303030206e200a30303030303030363433203030303030206e200a30303030303030363638203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c37613434356432326537353839396631373163336530636666626163653066623e203c37613434356432326537353839396631373163336530636666626163653066623e5d0a3e3e0a7374617274787265660a313036330a2525454f460a, '2025-12-06 20:52:46'),
(6, 15, 'invoice-15-1765054409181.pdf', 'application/pdf', 1476, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333370a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd8edb3010847b3ec5bec031fb3b2b02868a0049912e88bac315892d5571912aaf1f50360cc50272514110fc9b6fb8b3424c4c2f424cd994ced7f2ab08fd2ece145111742d0d55c5efcb9fe55bf9bade797ef771ba6f0a39535aab9ca0e95a3e7c169281a6a5bc9ebc611e49994e899134e884050d861889df68fa523e4dffa7cf5213c3435fdfd357f6e66edf470aa693723202331c0d335259873408cefda68985b6838e30641d1a9e1dc543f56f7e671c25a45756dffdd921e9888db65a1fa1171353bd181f6781ab84ee58814b32ce5846b25ee576ab3662cbf7b9e7b9a690caff7a73d4956975dea51e9c8a059e01cb4d8d6f7378b05efcbc26fd63752798b1288762c9e8b54b3dea44861ab64f5b32ba7a3a5a7ab66dde4709ec15d8a51dbd6b5bba72fff5482fd29b7c6df10dcc2d74b6667c101a8d6b3f7886fa48b266b6a4f77e7e17f5072515e43f0a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353332395a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393538203030303030206e200a30303030303031303135203030303030206e200a30303030303030383936203030303030206e200a30303030303030383735203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373738203030303030206e200a30303030303030373033203030303030206e200a30303030303030363137203030303030206e200a30303030303030363432203030303030206e200a30303030303030363637203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c37663631376461616564643932386562353430613463653939613036643032623e203c37663631376461616564643932386562353430613463653939613036643032623e5d0a3e3e0a7374617274787265660a313036320a2525454f460a, '2025-12-06 20:53:29'),
(7, 16, 'invoice-16-1765054418600.pdf', 'application/pdf', 1484, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203334350a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd6edc3010847b3dc5be80e9fd9d1501418581a44867585d9022394995af4895d73778391c7427c0890a091045ce379c592126a62721a6ac4aa773f7bb13fad339534441d0b9ab282a7efd7cefdebad7cb9ec7732fd37551c899d26ae1044de7eef9ab90f434adddf7c12b96919469488ca441035654186224fe41d3b7eecbf47ffa2c25d1dff4f55ffaca5eddede748c134282723b0c051b12095b54f83e0d4769a18b41e74843e4b5ff1e8286eaaf7fcc6384a482facbebbb343d2111b6db5f684ce26a63a1bdbd17c012e12ba6305e6649cb08e642de5fa376dc496ef4bebf3d2422a7f76e6a82bd3e2bc6b3d38152b3c03969b8cdd1130acca3e23d2d02b9be91c3c36b50102bb7af975d489f4256cdfb66440b0a4a3a667dd767294c05e805ddbd1a6b6a62bb75b8ff4246dc82f237e375cd5aa2eed7d101b954bfbf188f591e492d49ade267a03b31bacbf837d00806be4440a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353333385a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393636203030303030206e200a30303030303031303233203030303030206e200a30303030303030393034203030303030206e200a30303030303030383833203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373836203030303030206e200a30303030303030373131203030303030206e200a30303030303030363235203030303030206e200a30303030303030363530203030303030206e200a30303030303030363735203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c62353631616335316464653635643538353433636466323434633266383134373e203c62353631616335316464653635643538353433636466323434633266383134373e5d0a3e3e0a7374617274787265660a313037300a2525454f460a, '2025-12-06 20:53:38'),
(8, 17, 'invoice-17-1765054442756.pdf', 'application/pdf', 1478, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333390a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd8ed4401084733f45bfc00dfd5bed96560e9020204338430468d78ed88088d747e33b9d7c6b04389860feeaebae6a2126a62721a62ca5eb7df83908fd1a9c29a221e83e149a8abf6c7f0c5f86cfdb9bc77fefe7974321674aabc6099aefc3bb8f4232d2bc0e5f2f5e582652a64b62220dba6045c11013f1379a3f0d1fe6ffd3676989f1555fffa5afece56edf270aa68b7232020b1c8505a9ac631a04d7fed2c452eb644518b38d85c78ae255f52dbf33ce12d21bab1f7a76483a62a7add657e8cdc4546fc676d65f809b841e58815b32ae5827b2ee723dbb8dd8f37de9796e29a4f2dffe9cadcab4391f520f4ec50acf80e5cee3cdfb5b5ac673c69e5b16926356bf35353d5b818c2dec98b26440b0a4a3d2b3f6599c25b037e09072f41e2a5db9773bd193f4e1de467b074b2b2b5d8c8d4f62a3b8f58b47ac4f245b5a6b7a77efcd0487958d7fc0fd0649b0e3020a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353430325a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393630203030303030206e200a30303030303031303137203030303030206e200a30303030303030383938203030303030206e200a30303030303030383737203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373830203030303030206e200a30303030303030373035203030303030206e200a30303030303030363139203030303030206e200a30303030303030363434203030303030206e200a30303030303030363639203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c32383131613564303338633335363936363763313566303535616630616465323e203c32383131613564303338633335363936363763313566303535616630616465323e5d0a3e3e0a7374617274787265660a313036340a2525454f460a, '2025-12-06 20:54:02'),
(9, 18, 'invoice-18-1765054461883.pdf', 'application/pdf', 1474, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333350a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c95923d6e1c310c857b9d8217b0c2dfc711b098c2805db833325d9022d89da9bc852b5fdfd07a618c778c2453a89044be8fe4a31013d39d105336a5e3b9bc16a1b7e24c111541e7d25055fc7a7d293fcbf325e636ef7eba3e0a39535aab9ca0e95c7e3c0ac940d3527e1dbc611e49990e899134e880050d8618897fd3f4541ea6ffd367a989e1535fffa5afeccdddfe8c144c07e5640466381a66a4b20e69101c7ba4890dda76568421ebd0705b517caa7ee577c65e427a65f54dcf0e4947acb4d5fa093d9998eac9d8f6ce17e02aa11b56e0948c239691ac4fb97d4c1bb1e6fbdcfdbcb890ca7fcbd95b956975deb81e9c8a059e01cbf58c6111bd8284f8acec8601928a44a4ee65cb50c3b6fe4a0604733a5a7ab6b50b7b09ec15d8f81b7d4f5bba72ef73a43be96b7d59ea15cc2c743636de098dc6b57fdc427d24b9b8b4a4f70d5ea1d2f81bd43b2aabe01e0a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353432315a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393536203030303030206e200a30303030303031303133203030303030206e200a30303030303030383934203030303030206e200a30303030303030383733203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373736203030303030206e200a30303030303030373031203030303030206e200a30303030303030363135203030303030206e200a30303030303030363430203030303030206e200a30303030303030363635203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c38633130343438306562616263636636353738623361643733326439386362643e203c38633130343438306562616263636636353738623361643733326439386362643e5d0a3e3e0a7374617274787265660a313036300a2525454f460a, '2025-12-06 20:54:21'),
(10, 19, 'invoice-19-1765054495076.pdf', 'application/pdf', 1470, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333310a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592bd6edb401084fb7b8a7d015ff6779607082c0cd885bbc0ec8c1481445656912aaf6f9c2c089218386671c5fdcdb73bb3424c4c0f424cd994f6c7f2a708fd2dce145111742c0d55c5cfdbf7f25a7e9ededcff7b9cce8742ce94d62a27683a961fcf4232d0b494b79d37cc2329d32e319206edb0a0c11023f12f9a5ecad3f43d7d969a182efafa3f7d656feef67ba460da29272330c3d130239575488360df5f9a58d3b6b1220c598786fb8ae2a27acbef8cad84f4caeaab9e1d928eb8d256eb2bf46062aa0763dbea2fc0554257acc021197b2c235977b97dba8db8e6fbdcf33ca590ca5ffdd95a9569755ea51e9c8a059e01cb6b8fc3d8d355f9ec91288779f3c356ae0c356c9dad644030a7a3a567bb4997b732d82bb04a37fa94b674e5dee5480fd287fa34d2378187cec69ba1d1b8f68b7ba88f24a78c96ee1af6b728e37fc03e000c89e0000a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230363230353435355a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393532203030303030206e200a30303030303031303039203030303030206e200a30303030303030383930203030303030206e200a30303030303030383639203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373732203030303030206e200a30303030303030363937203030303030206e200a30303030303030363131203030303030206e200a30303030303030363336203030303030206e200a30303030303030363631203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c36336231383536666435613966383463656565353137323230636465383833333e203c36336231383536666435613966383463656565353137323230636465383833333e5d0a3e3e0a7374617274787265660a313035360a2525454f460a, '2025-12-06 20:54:55'),
(11, 20, 'invoice-20-1765146636842.pdf', 'application/pdf', 1473, 0x255044462d312e330a25ffffffff0a372030206f626a0a3c3c0a2f54797065202f506167650a2f506172656e742031203020520a2f4d65646961426f78205b30203020363132203739325d0a2f436f6e74656e74732035203020520a2f5265736f75726365732036203020520a3e3e0a656e646f626a0a362030206f626a0a3c3c0a2f50726f63536574205b2f504446202f54657874202f496d61676542202f496d61676543202f496d616765495d0a2f466f6e74203c3c0a2f46312038203020520a3e3e0a3e3e0a656e646f626a0a352030206f626a0a3c3c0a2f4c656e677468203333340a2f46696c746572202f466c6174654465636f64650a3e3e0a73747265616d0a789c9592cd6adc401084eff314fd029ef46fb506161d02f621b710dd4c0e61259db2879cfcfa6614637657185b0c08466ad5d75dd5424c4c0f424cd994ce97f2af08bd14678aa808ba9486aae26fd7bfe557f9b9d5dcfff77d7a7b29e44c69ad7282a64bf9f62424034d6b793e79c33292329d122369d0092b1a0c3112ffa6e947799cbea6cf5213c3bbbe7ea6afeccdddfe8c144c27e5640416381a16a4b20e69109c7ba5a9b1b6831d61c83a34dc7714efaab7fcce384a48afacbe9bd921e9885b6d530b9d4d4c7536361c6581ab84ee5881391967ac235977b9fd771b71cd778163eece2a47a421528ff24dabf32edfe054acf00c585eb989968c012b962d3f31e909f7daa35c196ad83e45c9806049474bcf76e5b5d97094c15e815d8ed1f7b1a52bf729477a90bebedbf25ee1c4b81f5dfaf320381ad7fee11eec23c996e29adeb7f576ba0f81af2a6ddd640a656e6473747265616d0a656e646f626a0a31302030206f626a0a285044464b6974290a656e646f626a0a31312030206f626a0a285044464b6974290a656e646f626a0a31322030206f626a0a28443a32303235313230373232333033365a290a656e646f626a0a392030206f626a0a3c3c0a2f50726f6475636572203130203020520a2f43726561746f72203131203020520a2f4372656174696f6e44617465203132203020520a3e3e0a656e646f626a0a382030206f626a0a3c3c0a2f54797065202f466f6e740a2f42617365466f6e74202f48656c7665746963610a2f53756274797065202f54797065310a2f456e636f64696e67202f57696e416e7369456e636f64696e670a3e3e0a656e646f626a0a342030206f626a0a3c3c0a3e3e0a656e646f626a0a332030206f626a0a3c3c0a2f54797065202f436174616c6f670a2f50616765732031203020520a2f4e616d65732032203020520a3e3e0a656e646f626a0a312030206f626a0a3c3c0a2f54797065202f50616765730a2f436f756e7420310a2f4b696473205b37203020525d0a3e3e0a656e646f626a0a322030206f626a0a3c3c0a2f4465737473203c3c0a20202f4e616d6573205b0a5d0a3e3e0a3e3e0a656e646f626a0a787265660a302031330a303030303030303030302036353533352066200a30303030303030393535203030303030206e200a30303030303031303132203030303030206e200a30303030303030383933203030303030206e200a30303030303030383732203030303030206e200a30303030303030323038203030303030206e200a30303030303030313139203030303030206e200a30303030303030303135203030303030206e200a30303030303030373735203030303030206e200a30303030303030373030203030303030206e200a30303030303030363134203030303030206e200a30303030303030363339203030303030206e200a30303030303030363634203030303030206e200a747261696c65720a3c3c0a2f53697a652031330a2f526f6f742033203020520a2f496e666f2039203020520a2f4944205b3c61653238386137656462386436376237643066383036323336613731643364323e203c61653238386137656462386436376237643066383036323336613731643364323e5d0a3e3e0a7374617274787265660a313035390a2525454f460a, '2025-12-07 22:30:36');

-- --------------------------------------------------------

--
-- Table structure for table `fournisseur`
--

CREATE TABLE `fournisseur` (
  `id` int(11) NOT NULL,
  `nom` varchar(255) NOT NULL,
  `contactNom` varchar(255) DEFAULT NULL,
  `telephone` varchar(50) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `adresse` text DEFAULT NULL,
  `createdAt` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `fournisseur`
--

INSERT INTO `fournisseur` (`id`, `nom`, `contactNom`, `telephone`, `email`, `adresse`, `createdAt`) VALUES
(1, 'ACME Supplies', 'Jane Doe', '+1-555-1000', 'jane@acme.test', '123 Supply St', '2025-12-07 19:32:43'),
(2, 'Global Imports', 'John Roe', '+1-555-2000', 'john@global.test', '456 Harbor Rd', '2025-12-07 19:32:43');

-- --------------------------------------------------------

--
-- Table structure for table `issues`
--

CREATE TABLE `issues` (
  `id` int(11) NOT NULL,
  `type` varchar(50) NOT NULL,
  `description` text NOT NULL,
  `reportedBy` varchar(100) NOT NULL,
  `status` varchar(50) DEFAULT 'pending',
  `createdAt` timestamp NOT NULL DEFAULT current_timestamp(),
  `updatedAt` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `produitId` int(11) DEFAULT NULL,
  `damagedPieces` int(11) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `issues`
--

INSERT INTO `issues` (`id`, `type`, `description`, `reportedBy`, `status`, `createdAt`, `updatedAt`, `produitId`, `damagedPieces`) VALUES
(1, 'mal_fabrication', 'mal fab', 'employee', 'resolved', '2025-12-02 22:20:38', '2025-12-06 19:42:43', NULL, 0),
(2, 'stock_issue', 'screen', 'employee', 'resolved', '2025-12-02 22:33:46', '2025-12-06 19:42:39', 10, 4);

-- --------------------------------------------------------

--
-- Table structure for table `mouvementstock`
--

CREATE TABLE `mouvementstock` (
  `id` int(11) NOT NULL,
  `produitId` int(11) DEFAULT NULL,
  `utilisateurId` int(11) DEFAULT NULL,
  `type` varchar(10) NOT NULL,
  `quantité` int(11) NOT NULL,
  `date` timestamp NOT NULL DEFAULT current_timestamp(),
  `raison` text DEFAULT NULL,
  `fournisseurId` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `mouvementstock`
--

INSERT INTO `mouvementstock` (`id`, `produitId`, `utilisateurId`, `type`, `quantité`, `date`, `raison`, `fournisseurId`) VALUES
(1, 13, 2, 'OUT', 2, '2025-12-02 11:47:30', 'sale', NULL),
(2, 15, 2, 'OUT', 29, '2025-12-02 11:48:01', 'sale', NULL),
(3, 15, 2, 'IN', 29, '2025-12-02 11:48:50', 'return', NULL),
(4, 16, 2, 'OUT', 4, '2025-12-02 15:15:14', 'sale', NULL),
(5, 16, 2, 'IN', 39, '2025-12-07 21:00:24', 'Reception', 1),
(6, 16, 2, 'SALE', -38, '2025-12-07 22:30:35', 'Vente client', NULL);

--
-- Triggers `mouvementstock`
--
DELIMITER $$
CREATE TRIGGER `trg_update_product_stock` BEFORE INSERT ON `mouvementstock` FOR EACH ROW BEGIN
  IF NEW.type NOT IN ('IN','OUT','ADJUST','SALE') THEN
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid movement type';
  END IF;

  IF NEW.type IN ('OUT','SALE') THEN
    SET NEW.`quantité` = -ABS(NEW.`quantité`);
  ELSE
    SET NEW.`quantité` = ABS(NEW.`quantité`);
  END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `produit`
--

CREATE TABLE `produit` (
  `id` int(11) NOT NULL,
  `nom` varchar(255) NOT NULL,
  `quantité` int(11) NOT NULL DEFAULT 0,
  `prix` decimal(10,2) NOT NULL,
  `minStock` int(11) DEFAULT NULL,
  `lowStockAlert` int(11) DEFAULT NULL,
  `maxStock` int(11) DEFAULT NULL,
  `categorieId` int(11) DEFAULT NULL,
  `fournisseurId` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `produit`
--

INSERT INTO `produit` (`id`, `nom`, `quantité`, `prix`, `minStock`, `lowStockAlert`, `maxStock`, `categorieId`, `fournisseurId`) VALUES
(6, 'Samsung Galaxy S22', 61, 799.00, 10, 20, 300, 1, NULL),
(7, 'Netgear Nighthawk 5G', 39, 299.99, 5, 15, 150, 2, NULL),
(8, 'Logitech MX Master', 137, 65.50, 30, 50, 400, 3, NULL),
(9, 'Travel eSIM - 15GB', 597, 15.00, 50, 100, 800, 4, NULL),
(10, 'Xiaomi Redmi Note 12', 117, 199.00, 20, 40, 500, 1, NULL),
(11, 'TP-Link Nano Router', 83, 45.90, 10, 25, 250, 2, NULL),
(12, '65W GaN Charger', 298, 35.00, 50, 100, 600, 3, NULL),
(13, '50GB Data SIM', 438, 25.00, 75, 125, 750, 4, NULL),
(14, 'Sony WH-1000XM5', 60, 349.00, 8, 15, 120, 3, NULL),
(15, 'Deco Mesh 3-Pack', 28, 199.99, 4, 10, 80, 2, NULL),
(16, 'iphone 11 pro', 1, 1000.00, 5, 7, 999, 1, NULL);

--
-- Triggers `produit`
--
DELIMITER $$
CREATE TRIGGER `trg_check_low_stock` AFTER UPDATE ON `produit` FOR EACH ROW BEGIN
    -- Check if the new quantity is less than or equal to the lowStockAlert level
    -- AND if the quantity has actually dropped since the last update
    -- AND if an 'OPEN' alert doesn't already exist for this product (to prevent spamming the table)

    IF NEW.quantité <= NEW.lowStockAlert AND 
       NEW.quantité < OLD.quantité THEN
        
        -- Check if an OPEN alert already exists for this product
        IF (SELECT COUNT(*) FROM alerteStock 
            WHERE produitId = NEW.id AND statut = 'OPEN') = 0 
        THEN
            -- Insert a new low stock alert record
            INSERT INTO alerteStock (produitId, type, statut)
            VALUES (NEW.id, 'LOW_STOCK', 'OPEN');
        END IF;
    
    -- Optional: Logic to automatically close an alert if stock is replenished
    ELSEIF NEW.quantité > OLD.quantité AND NEW.quantité > NEW.lowStockAlert THEN
        UPDATE alerteStock
        SET statut = 'CLOSED'
        WHERE produitId = NEW.id AND statut = 'OPEN';
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `utilisateur`
--

CREATE TABLE `utilisateur` (
  `id` int(11) NOT NULL,
  `nom` varchar(255) NOT NULL,
  `role` varchar(50) DEFAULT NULL,
  `email` varchar(255) NOT NULL,
  `motDePasse` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `utilisateur`
--

INSERT INTO `utilisateur` (`id`, `nom`, `role`, `email`, `motDePasse`) VALUES
(2, 'Admin User', 'admin', 'admin@stock.com', '$2b$10$zFNdf.LC./OT0kcB2eOcjOqdgbfMvXLC8d9fmUVLTpDcVV12VFNxS'),
(3, 'New Employee', 'employee', 'employee@test.com', '$2b$10$b53A8TFszYZI9DMC5PBwcu5YctG3qb5VbxhdTw.IFkCA9llxTJ2pe'),
(4, 'testing', 'employee', 'test@gmail.com', '$2b$10$edUZx87tnKxUm.l270kEIOUdomzJuWxuMcQjupRdVnFAD0Ghv1msu');

-- --------------------------------------------------------

--
-- Table structure for table `vente`
--

CREATE TABLE `vente` (
  `id` int(11) NOT NULL,
  `produitId` int(11) NOT NULL,
  `utilisateurId` int(11) NOT NULL,
  `quantité` int(11) NOT NULL,
  `prixTotal` decimal(10,2) NOT NULL,
  `date` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `vente`
--

INSERT INTO `vente` (`id`, `produitId`, `utilisateurId`, `quantité`, `prixTotal`, `date`) VALUES
(1, 6, 3, 2, 0.00, '2025-12-01 23:00:00'),
(2, 6, 3, 3, 0.00, '2025-12-01 23:00:00'),
(3, 10, 4, 2, 0.00, '2025-12-04 23:00:00'),
(4, 9, 2, 1, 0.00, '2025-12-04 23:00:00'),
(5, 11, 2, 6, 0.00, '2025-12-04 23:00:00'),
(6, 16, 2, 1, 0.00, '2025-12-04 23:00:00'),
(7, 10, 2, 1, 0.00, '2025-12-04 23:00:00'),
(8, 7, 2, 1, 0.00, '2025-12-04 23:00:00'),
(9, 6, 2, 1, 0.00, '2025-12-04 23:00:00'),
(10, 8, 2, 9, 0.00, '2025-12-04 23:00:00'),
(11, 6, 3, 6, 0.00, '2025-12-05 23:00:00'),
(12, 16, 3, 5, 0.00, '2025-12-05 23:00:00'),
(13, 9, 3, 2, 0.00, '2025-12-05 23:00:00'),
(14, 8, 3, 4, 0.00, '2025-12-05 23:00:00'),
(15, 11, 3, 1, 45.90, '2025-12-05 23:00:00'),
(16, 15, 3, 2, 399.98, '2025-12-05 23:00:00'),
(17, 6, 3, 2, 1598.00, '2025-12-05 23:00:00'),
(18, 12, 3, 2, 70.00, '2025-12-05 23:00:00'),
(19, 13, 3, 10, 250.00, '2025-12-05 23:00:00'),
(20, 16, 2, 38, 38000.00, '2025-12-06 23:00:00');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `alertestock`
--
ALTER TABLE `alertestock`
  ADD PRIMARY KEY (`id`),
  ADD KEY `produitId` (`produitId`);

--
-- Indexes for table `categorie`
--
ALTER TABLE `categorie`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `facture`
--
ALTER TABLE `facture`
  ADD PRIMARY KEY (`id`),
  ADD KEY `sale_idx` (`saleId`);

--
-- Indexes for table `fournisseur`
--
ALTER TABLE `fournisseur`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idx_fournisseur_nom` (`nom`);

--
-- Indexes for table `issues`
--
ALTER TABLE `issues`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mouvementstock`
--
ALTER TABLE `mouvementstock`
  ADD PRIMARY KEY (`id`),
  ADD KEY `produitId` (`produitId`),
  ADD KEY `utilisateurId` (`utilisateurId`),
  ADD KEY `fk_mouvement_fournisseur` (`fournisseurId`);

--
-- Indexes for table `produit`
--
ALTER TABLE `produit`
  ADD PRIMARY KEY (`id`),
  ADD KEY `categorieId` (`categorieId`),
  ADD KEY `fk_produit_fournisseur` (`fournisseurId`);

--
-- Indexes for table `utilisateur`
--
ALTER TABLE `utilisateur`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email` (`email`);

--
-- Indexes for table `vente`
--
ALTER TABLE `vente`
  ADD PRIMARY KEY (`id`),
  ADD KEY `produitId` (`produitId`),
  ADD KEY `utilisateurId` (`utilisateurId`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `alertestock`
--
ALTER TABLE `alertestock`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT for table `categorie`
--
ALTER TABLE `categorie`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT for table `facture`
--
ALTER TABLE `facture`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT for table `fournisseur`
--
ALTER TABLE `fournisseur`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT for table `issues`
--
ALTER TABLE `issues`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT for table `mouvementstock`
--
ALTER TABLE `mouvementstock`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT for table `produit`
--
ALTER TABLE `produit`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=17;

--
-- AUTO_INCREMENT for table `utilisateur`
--
ALTER TABLE `utilisateur`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT for table `vente`
--
ALTER TABLE `vente`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `alertestock`
--
ALTER TABLE `alertestock`
  ADD CONSTRAINT `alertestock_ibfk_1` FOREIGN KEY (`produitId`) REFERENCES `produit` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `mouvementstock`
--
ALTER TABLE `mouvementstock`
  ADD CONSTRAINT `fk_mouvement_fournisseur` FOREIGN KEY (`fournisseurId`) REFERENCES `fournisseur` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  ADD CONSTRAINT `mouvementstock_ibfk_1` FOREIGN KEY (`produitId`) REFERENCES `produit` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `mouvementstock_ibfk_2` FOREIGN KEY (`utilisateurId`) REFERENCES `utilisateur` (`id`);

--
-- Constraints for table `produit`
--
ALTER TABLE `produit`
  ADD CONSTRAINT `fk_produit_fournisseur` FOREIGN KEY (`fournisseurId`) REFERENCES `fournisseur` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  ADD CONSTRAINT `produit_ibfk_1` FOREIGN KEY (`categorieId`) REFERENCES `categorie` (`id`);

--
-- Constraints for table `vente`
--
ALTER TABLE `vente`
  ADD CONSTRAINT `vente_ibfk_1` FOREIGN KEY (`produitId`) REFERENCES `produit` (`id`),
  ADD CONSTRAINT `vente_ibfk_2` FOREIGN KEY (`utilisateurId`) REFERENCES `utilisateur` (`id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
